<!-- <div *ngIf="isLoading"><app-loading-spinner></app-loading-spinner></div> -->


<div
  class="fixed bottom-0 right-0 m-4 rounded-full h-12 w-12 hover:bg-blue-700 text-white font-bold flex items-center justify-center"
  style="background-color: #4c1d95"
>
  <button (click)="openDialog()">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      height="24"
      viewBox="0 -960 960 960"
      width="24"
      fill="#FFF"
    >
      <path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z" />
    </svg>
  </button>
</div>
<div class="relative lg:block hidden w-2/5 mx-auto mt-4">
  <!-- Search form -->
  <form
    [formGroup]="searchForm"
    class="flex items-center border rounded-lg overflow-hidden"
    (ngSubmit)="search()"
  >
    <!-- Search icon -->
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="mx-3 h-5 w-5 text-gray-500"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
      />
    </svg>

    <!-- Search input -->
    <input
      (input)="search()"
      formControlName="search"
      class="flex-1 py-2 pr-4 outline-none"
      type="search"
      placeholder="Search..."
    />

    <!-- Search button -->
    <button class="h-9 bg-amber-400 px-4 hover:bg-yellow-300 rounded-r-lg">
      Search
    </button>
  </form>
</div>
   <!-- Error Message -->
        <div
          *ngIf="showErrorBox"
          class="relative mt-4 max-w-sm mx-auto p-3 rounded-lg text-sm font-medium border transition-opacity duration-1000"
          [ngClass]="{
            'opacity-100': showErrorBox,
            'opacity-0': !showErrorBox,
            'text-red-700 bg-red-100 border-red-300': messageType === 'error',
            'text-green-700 bg-green-100 border-green-300': messageType === 'success'
          }"
        >
          {{ errorMessage }}

          <!-- Close Button -->
          <button
            (click)="closeMessage()"
            class="absolute top-2 right-2 font-bold"
            [ngClass]="{
              'text-red-500 hover:text-red-700': messageType === 'error',
              'text-green-500 hover:text-green-700': messageType === 'success'
            }"
          >
            âœ•
          </button>
        </div>
<div>
  <h2 class="text-xl font-bold mb-4">Products Overview</h2>


<div class="overflow-x-auto p-4">
  <table class="min-w-full border border-gray-400 text-sm text-left rounded-lg ">
    <thead class="bg-gray-200 text-gray-700 uppercase  border-gray-400 text-xs">
      <tr>
        <th class="px-6 py-3 border-b">Name</th>
        <th class="px-6 py-3 border-b">Price</th>
        <th class="px-6 py-3 border-b">Stock</th>
        <!-- <th class="px-6 py-3 border-b">Category</th> -->
        <th class="px-6 py-3 border-b text-center">Actions</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-400">
      <tr *ngFor="let product of displayedProducts; trackBy: trackByProductId">
        <td class="px-6 py-4">{{ product.name }}</td>
        <td class="px-6 py-4">{{ product.price }}</td>
        <td class="px-6 py-4">{{ product.stock }}</td>
        <!-- <td class="px-6 py-4">{{ product.category }}</td> -->
        <td class="px-6 py-4 text-center">
          <button  (click)="openEditDialog(product)" class="px-3 py-1 bg-violet-900 text-white rounded hover:bg-blue-600">
            Edit
          </button>
          <button  (click)="deleteProduct(product._id,product.name)"
          class="ml-2 px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600">
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div  class="mt-4 flex justify-end">
  <mat-paginator
    [length]="totalProducts" 
    [pageSize]="pageSize"
    [pageIndex]="currentPage"
    [pageSizeOptions]="[5, 10, 20]"
    (page)="onPageChange($event)"
    
    class="!rounded-lg !px-4 !py-2 !text-gray-700"
    aria-label="Select page">
  </mat-paginator>
  </div>
</div>
